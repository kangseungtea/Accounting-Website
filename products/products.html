<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì œí’ˆ ê´€ë¦¬ - ê¹œëƒ¥ì»´í“¨í„°</title>
    <link rel="stylesheet" href="/style.css?v=20250111">
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="../shared/index.html" class="nav-brand">ê¹œëƒ¥ì»´í“¨í„°</a>
            <ul class="nav-menu">
                <li><a href="../shared/index.html">í™ˆ</a></li>
                <li><a href="../customers/customers.html">ê³ ê°</a></li>
                <li><a href="products.html" class="active">ì œí’ˆ</a></li>
                <li><a href="#" onclick="alert('ì¥ë¶€ ê´€ë¦¬ í˜ì´ì§€ (ê°œë°œ ì˜ˆì •)')">ì¥ë¶€</a></li>
                <li><a href="#" onclick="alert('íšŒê³„ ê´€ë¦¬ í˜ì´ì§€ (ê°œë°œ ì˜ˆì •)')">íšŒê³„</a></li>
                <li><a href="#" onclick="alert('ì„¤ì • í˜ì´ì§€ (ê°œë°œ ì˜ˆì •)')">ì„¤ì •</a></li>
            </ul>
            <div class="user-info">
                <span id="userName">ì‚¬ìš©ì</span>
                <button onclick="logout()" class="btn btn-outline">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </nav>

    <!-- ì œí’ˆ ê´€ë¦¬ í™”ë©´ -->
    <div class="products-page">
        <div class="page-header">
            <h1>ì œí’ˆ ê´€ë¦¬</h1>
        </div>
        
        <div class="search-filter">
            <input type="text" id="productSearch" placeholder="ì œí’ˆëª…, ë¸Œëœë“œë¡œ ê²€ìƒ‰..." onkeyup="searchProducts()" class="form-control">
            <select id="mainCategoryFilter" onchange="updateSubCategories()" class="form-control">
                <option value="">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
            </select>
            <select id="subCategoryFilter" onchange="updateDetailCategories()" disabled class="form-control">
                <option value="">í•˜ìœ„ ì¹´í…Œê³ ë¦¬</option>
            </select>
            <select id="detailCategoryFilter" onchange="filterProducts()" disabled class="form-control">
                <option value="">ìƒì„¸ ì¹´í…Œê³ ë¦¬</option>
            </select>
            <select id="statusFilter" onchange="filterProducts()" class="form-control">
                <option value="">ì „ì²´ ìƒíƒœ</option>
                <option value="ì •í’ˆ">ì •í’ˆ</option>
                <option value="ë²Œí¬">ë²Œí¬</option>
                <option value="ì§êµ¬">ì§êµ¬</option>
                <option value="ì¤‘ê³ ">ì¤‘ê³ </option>
            </select>
            <button class="btn btn-primary" onclick="window.open('product-add.html', '_blank', 'width=900,height=800,scrollbars=yes,resizable=yes')">+ ìƒˆ ì œí’ˆ ë“±ë¡</button>
            <button class="btn btn-outline" onclick="showCategoryModal()" title="ìƒˆ ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤">
                <span class="btn-icon">ğŸ“</span> ì¹´í…Œê³ ë¦¬ ì¶”ê°€
            </button>
        </div>
        
        <div class="products-table-container">
            <table class="products-table">
                <thead>
                <tr>
                    <th>ì œí’ˆì½”ë“œ</th>
                    <th>ì œí’ˆëª…</th>
                    <th>ì¹´í…Œê³ ë¦¬</th>
                    <th>ë¸Œëœë“œ</th>
                    <th>ê°€ê²©</th>
                    <th>ì¬ê³ </th>
                    <th>ìƒíƒœ</th>
                    <th>ì•¡ì…˜</th>
                </tr>
                </thead>
                <tbody id="productsTableBody" style="text-align: center;"> 
                    <!-- ì œí’ˆ ë°ì´í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </tbody>
            </table>
        </div>
        
        <div class="pagination" id="pagination">
            <!-- í˜ì´ì§€ë„¤ì´ì…˜ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <!-- ì œí’ˆ ë“±ë¡/ìˆ˜ì • ëª¨ë‹¬ -->
    <div class="modal" id="productModal" style="display: none;">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh; display: flex; flex-direction: column;">
            <div class="modal-header" style="flex-shrink: 0;">
                <h2 id="productModalTitle">ì œí’ˆ ë“±ë¡</h2>
                <button class="close-btn" onclick="closeProductModal()">&times;</button>
            </div>
            <div class="modal-body" style="flex: 1; overflow-y: auto; padding: 20px; max-height: calc(90vh - 120px); scrollbar-width: thin; scrollbar-color: #ced4da #f8f9fa;">
                <form id="productForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="productName">ì œí’ˆëª… *</label>
                        <input type="text" id="productName" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="productCode">ì œí’ˆ ì½”ë“œ</label>
                        <input type="text" id="productCode" name="productCode" placeholder="ì œí’ˆ ì½”ë“œ ì…ë ¥">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productMainCategory" class="required">ëŒ€ë¶„ë¥˜ *</label>
                        <select id="productMainCategory" name="mainCategory" required onchange="updateProductSubCategories()" class="form-control">
                            <option value="">ëŒ€ë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="productSubCategory">ì¤‘ë¶„ë¥˜</label>
                        <select id="productSubCategory" name="subCategory" onchange="updateProductDetailCategories()" disabled class="form-control">
                            <option value="">ì¤‘ë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productDetailCategory">ì†Œë¶„ë¥˜</label>
                        <select id="productDetailCategory" name="detailCategory" disabled class="form-control">
                            <option value="">ì†Œë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="productBrand">ë¸Œëœë“œ *</label>
                        <input type="text" id="productBrand" name="brand" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">ê°€ê²© *</label>
                        <input type="number" id="productPrice" name="price" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="productStock">ì¬ê³ ìˆ˜ëŸ‰ *</label>
                        <input type="number" id="productStock" name="stockQuantity" min="0" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productStatus">ìƒíƒœ</label>
                        <select id="productStatus" name="status">
                            <option value="ì •í’ˆ">ì •í’ˆ</option>
                            <option value="ë²Œí¬">ë²Œí¬</option>
                            <option value="ì¤‘ê³ ">ì¤‘ê³ </option>
                            <option value="ì§êµ¬">ì§êµ¬</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="productImage">ì œí’ˆ ì´ë¯¸ì§€</label>
                    <input type="file" id="productImage" name="image" accept="image/*" onchange="previewImage(this)">
                    <div id="imagePreview" style="margin-top: 10px; display: none;">
                        <img id="previewImg" style="max-width: 200px; max-height: 200px; border-radius: 4px;">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="productDescription">ì œí’ˆ ì„¤ëª…</label>
                    <textarea id="productDescription" name="description" rows="4" placeholder="ì œí’ˆì˜ ìƒì„¸ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                </div>
                
                </form>
            </div>
            <div class="modal-footer" style="flex-shrink: 0; padding: 20px; border-top: 1px solid #e9ecef; background: #f8f9fa;">
                <div class="form-actions" style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="btn btn-outline" onclick="closeProductModal()">ì·¨ì†Œ</button>
                    <button type="submit" form="productForm" class="btn btn-primary">ì €ì¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì œí’ˆ ìƒì„¸ ëª¨ë‹¬ -->
    <div class="modal" id="productDetailModal" style="display: none;">
        <div class="modal-content" style="max-width: 1200px; max-height: 90vh; display: flex; flex-direction: column;">
            <div class="modal-header" style="flex-shrink: 0; display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #e9ecef; background: #f8f9fa;">
                <h2 style="margin: 0; color: #333;">ì œí’ˆ ìƒì„¸ ì •ë³´</h2>
                <button class="close-btn" onclick="closeProductDetailModal()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
            </div>
            <div id="productDetailContent" style="flex: 1; overflow-y: auto; padding: 30px; max-height: calc(90vh - 80px); scrollbar-width: thin; scrollbar-color: #ced4da #f8f9fa;">
                <!-- ì œí’ˆ ìƒì„¸ ì •ë³´ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <!-- ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="categoryModal" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>ì¹´í…Œê³ ë¦¬ ì¶”ê°€</h2>
                <button class="close-btn" onclick="closeCategoryModal()">&times;</button>
            </div>
            <form id="categoryForm">
                <div class="form-group">
                    <label for="categoryLevel" class="required">ì¹´í…Œê³ ë¦¬ ë ˆë²¨</label>
                    <select id="categoryLevel" name="level" required onchange="updateCategoryForm()" class="form-control">
                        <option value="">ë ˆë²¨ì„ ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="main">ğŸ¢ ëŒ€ë¶„ë¥˜ ì¶”ê°€</option>
                        <option value="sub">ğŸ“‚ ì¤‘ë¶„ë¥˜ ì¶”ê°€</option>
                        <option value="detail">ğŸ“ ì†Œë¶„ë¥˜ ì¶”ê°€</option>
                    </select>
                </div>
                
                <div class="form-group" id="parentCategoryGroup" style="display: none;">
                    <label for="parentCategory" class="required">ìƒìœ„ ì¹´í…Œê³ ë¦¬</label>
                    <select id="parentCategory" name="parentCategory" class="form-control">
                        <option value="">ìƒìœ„ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                
                <div class="form-group" id="subParentCategoryGroup" style="display: none;">
                    <label for="subParentCategory" class="required">ì¤‘ë¶„ë¥˜ ì„ íƒ</label>
                    <select id="subParentCategory" name="subParentCategory" class="form-control">
                        <option value="">ì¤‘ë¶„ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="categoryName" class="required">ì¹´í…Œê³ ë¦¬ëª…</label>
                    <input type="text" id="categoryName" name="categoryName" required placeholder="ìƒˆ ì¹´í…Œê³ ë¦¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" class="form-control">
                </div>
                
                <div class="form-group">
                    <label for="categoryDescription">ì„¤ëª… (ì„ íƒì‚¬í•­)</label>
                    <textarea id="categoryDescription" name="categoryDescription" rows="3" placeholder="ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" class="form-control"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeCategoryModal()">
                        <span class="btn-icon">âŒ</span> ì·¨ì†Œ
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <span class="btn-icon">âœ…</span> ì¹´í…Œê³ ë¦¬ ì¶”ê°€
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="category-manager.js"></script>
    <style>
        /* ì œí’ˆ ëª¨ë‹¬ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        .modal-body::-webkit-scrollbar,
        #productDetailContent::-webkit-scrollbar {
            width: 8px;
        }
        
        .modal-body::-webkit-scrollbar-track,
        #productDetailContent::-webkit-scrollbar-track {
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .modal-body::-webkit-scrollbar-thumb,
        #productDetailContent::-webkit-scrollbar-thumb {
            background: #ced4da;
            border-radius: 4px;
        }
        
        .modal-body::-webkit-scrollbar-thumb:hover,
        #productDetailContent::-webkit-scrollbar-thumb:hover {
            background: #adb5bd;
        }
        
        /* ìŠ¤í¬ë¡¤ë°”ê°€ ë‚˜íƒ€ë‚  ë•Œë§Œ í‘œì‹œ */
        .modal-body,
        #productDetailContent {
            scrollbar-gutter: stable;
        }
        
        /* ì œí’ˆ ìƒì„¸ ëª¨ë‹¬ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        #productDetailContent::-webkit-scrollbar {
            width: 8px;
        }
        
        #productDetailContent::-webkit-scrollbar-track {
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        #productDetailContent::-webkit-scrollbar-thumb {
            background: #ced4da;
            border-radius: 4px;
        }
        
        #productDetailContent::-webkit-scrollbar-thumb:hover {
            background: #adb5bd;
        }
        
        /* ì¬ê³  ìƒíƒœë³„ ìƒ‰ìƒ ìŠ¤íƒ€ì¼ */
        .stock-negative {
            color: #ff6b6b !important;
            font-weight: bold;
        }
        
        .stock-empty {
            color: #dc3545 !important;
            font-weight: bold;
        }
        
        .stock-available {
            color: #28a745 !important;
            font-weight: bold;
        }
        
        /* ì œí’ˆ í…Œì´ë¸” ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .products-table-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        /* ì œí’ˆ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .products-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 8px;
            margin-top: 10px;
            table-layout: fixed;
        }
        
        .products-table thead {
            background: white;
        }
        
        .products-table thead th {
            padding: 15px 10px;
            text-align: left;
            font-weight: 600;
            color: #495057;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }
        
        /* ê° ì—´ ë„ˆë¹„ ì„¤ì • - í•„ìš”ì— ë”°ë¼ ìˆ˜ì •í•˜ì„¸ìš” */
        .products-table thead th:nth-child(1),  /* ì œí’ˆì½”ë“œ */
        .products-table tbody td:nth-child(1) {
            width: 10%;
        }
        
        .products-table thead th:nth-child(2),  /* ì œí’ˆëª… */
        .products-table tbody td:nth-child(2) {
            width: 30%;
        }
        
        .products-table thead th:nth-child(3),  /* ì¹´í…Œê³ ë¦¬ */
        .products-table tbody td:nth-child(3) {
            width: 10%;
        }
        
        .products-table thead th:nth-child(4),  /* ë¸Œëœë“œ */
        .products-table tbody td:nth-child(4) {
            width: 10%;
        }
        
        .products-table thead th:nth-child(5),  /* ê°€ê²© */
        .products-table tbody td:nth-child(5) {
            width: 10%;
        }
        
        .products-table thead th:nth-child(6),  /* ì¬ê³  */
        .products-table tbody td:nth-child(6) {
            width: 8%;
        }
        
        .products-table thead th:nth-child(7),  /* ìƒíƒœ */
        .products-table tbody td:nth-child(7) {
            width: 10%;
        }
        
        .products-table thead th:nth-child(8),  /* ì•¡ì…˜ */
        .products-table tbody td:nth-child(8) {
            width: 12%;
        }
        
        .products-table thead th:first-child {
            border-top-left-radius: 8px;
        }
        
        .products-table thead th:last-child {
            border-top-right-radius: 8px;
        }
        
        /* ì œí’ˆ í…Œì´ë¸” ì…€ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .products-table tbody td {
            padding: 15px 10px;
            vertical-align: middle;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .products-table tbody td:not(:last-child) {
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
        }
        
        .products-table tbody tr {
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .products-table tbody tr td:first-child {
            border-top-left-radius: 8px;
            border-bottom-left-radius: 8px;
        }
        
        .products-table tbody tr td:last-child {
            background: white;
            border-top-right-radius: 8px;
            border-bottom-right-radius: 8px;
        }
        
        .product-info-cell {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            padding: 12px 15px;
            border-radius: 6px;
            margin: 2px 0;
        }
        
        .product-code-cell {
            background: linear-gradient(135deg, #e7f5ff 0%, #ffffff 100%);
            border-left: 3px solid #007bff;
        }
        
        .product-name-cell {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            font-weight: 600;
            color: #333;
        }
        
        .product-category-cell {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
        }
        
        .product-brand-cell {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
        }
        
        .product-price-cell {
            background: linear-gradient(135deg, #e8f5e9 0%, #ffffff 100%);
            color: #28a745;
            font-weight: bold;
            border-left: 3px solid #28a745;
        }
        
        .product-stock-cell {
            background: linear-gradient(135deg, #fff3e0 0%, #ffffff 100%);
            font-weight: bold;
            border-left: 3px solid #ff9800;
        }
        
        .product-status-cell {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
        }
        
        .product-action-cell {
            background: white;
        }
    </style>

    <script src="products.js"></script>
</body>
</html>
