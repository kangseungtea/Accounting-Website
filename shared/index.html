<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인</title>
    <link rel="stylesheet" href="/style.css?v=20250111">
</head>
<body>
    <!-- 네비게이션 바 -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="nav-brand" onclick="showHome()">깜냥컴퓨터</a>
            <ul class="nav-menu" id="navMenu" style="display: none;">
                <li><a href="#" onclick="showHome()">홈</a></li>
                <li><a href="#" onclick="showCustomers()">고객</a></li>
                <li><a href="#" onclick="showProducts()">제품</a></li>
                <li><a href="#" onclick="showLedger()">장부</a></li>
                <li><a href="#" onclick="showAccounting()">회계</a></li>
                <li><a href="#" onclick="showSettings()">설정</a></li>
            </ul>
            <div class="user-info" id="userInfo" style="display: none;">
                <span id="userName">사용자</span>
                <button onclick="logout()" class="btn btn-outline">로그아웃</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="login-form" style="display: none;">
            <h2>로그인</h2>
            <form id="loginForm">
                <div class="form-group">
                    <input type="text" id="username" placeholder="아이디" required>
                </div>
                <div class="form-group">
                    <input type="password" id="password" placeholder="비밀번호" required>
                </div>
                <button type="submit">로그인</button>
            </form>
            <p>계정이 없으신가요? <a href="#" id="showRegister">회원가입</a></p>
        </div>

        <div class="register-form" style="display: none;">
            <h2>회원가입</h2>
            <form id="registerForm">
                <div class="form-group">
                    <input type="text" id="regName" placeholder="이름" required>
                </div>
                <div class="form-group">
                    <input type="text" id="regUsername" placeholder="아이디" required>
                </div>
                <div class="form-group">
                    <input type="password" id="regPassword" placeholder="비밀번호" required>
                </div>
                <div class="form-group">
                    <input type="tel" id="regPhone" placeholder="전화번호" required>
                </div>
                <button type="submit">가입하기</button>
            </form>
            <p>이미 계정이 있으신가요? <a href="#" id="showLogin">로그인</a></p>
        </div>
        
        <!-- 홈 화면 -->
        <div class="home-screen" id="homeScreen">
            <h1>깜냥컴퓨터에 오신 것을 환영합니다</h1>
            <p>로그인하여 서비스를 이용해보세요</p>
            <button onclick="showLoginForm()" class="btn btn-primary">로그인하기</button>
        </div>

        <!-- 대시보드 화면 -->
        <div class="dashboard" id="dashboard" style="display: none;">
            <h1>대시보드</h1>
            
            <!-- 수리 현황 섹션 -->
            <div class="repair-status-section">
                <div class="section-header">
                    <h2>🔧 수리 현황</h2>
                    <div class="section-controls">
                        <button class="btn btn-outline" onclick="refreshRepairStatus()">🔄 새로고침</button>
                    </div>
                </div>
                
                <!-- 수리 진행 상태 카드들 -->
                <div class="status-cards">
                    <div class="status-card pending">
                        <div class="status-icon">📝</div>
                        <div class="status-content">
                            <div class="status-title">접수</div>
                            <div class="status-value" id="pendingCount">0건</div>
                        </div>
                    </div>
                    
                    <div class="status-card in-progress">
                        <div class="status-icon">📦</div>
                        <div class="status-content">
                            <div class="status-title">위탁 접수</div>
                            <div class="status-value" id="inProgressCount">0건</div>
                        </div>
                    </div>
                    
                    <div class="status-card completed">
                        <div class="status-icon">✅</div>
                        <div class="status-content">
                            <div class="status-title">수리 완료</div>
                            <div class="status-value" id="completedCount">0건</div>
                        </div>
                    </div>
                    
                    <div class="status-card warranty">
                        <div class="status-icon">🛡️</div>
                        <div class="status-content">
                            <div class="status-title">보증 중</div>
                            <div class="status-value" id="warrantyCount">0건</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 진행중인 수리 내역 섹션 -->
            <div class="region-search-section">
                <div class="section-header">
                    <h2>🔧 진행중인 수리 내역</h2>
                    <div class="section-controls">
                        <input type="text" id="regionSearchInput" placeholder="지역명 또는 고객명을 입력하세요..." onkeyup="searchByRegion()">
                        <button class="btn btn-outline" onclick="clearRegionSearch()">초기화</button>
                        <button class="btn btn-primary" onclick="showAllRepairs()">전체 보기</button>
                    </div>
                </div>
                
                <div class="search-results" id="regionSearchResults">
                    <div class="loading">진행중인 수리 내역을 불러오는 중...</div>
                </div>
            </div>


            <!-- 매출/매입 분석 섹션 -->
            <div class="analysis-section">
                <div class="analysis-header">
                    <h2>📊 매출/매입 분석</h2>
                    <div class="analysis-controls">
                        <select id="analysisPeriod" onchange="updateAnalysis()">
                            <option value="daily">일별</option>
                            <option value="monthly" selected>월별</option>
                            <option value="yearly">연도별</option>
                        </select>
                        <button class="btn btn-primary" onclick="refreshAnalysis()">🔄 새로고침</button>
                    </div>
                </div>
                
                <!-- 요약 카드들 -->
                <div class="summary-cards">
                    <div class="summary-card revenue">
                        <div class="card-icon">💰</div>
                        <div class="card-content">
                            <div class="card-title">총 매출</div>
                            <div class="card-value" id="totalRevenue">0원</div>
                            <div class="card-subtitle" id="revenueCount">0건</div>
                        </div>
                    </div>
                    
                    <div class="summary-card expense">
                        <div class="card-icon">💸</div>
                        <div class="card-content">
                            <div class="card-title">총 매입</div>
                            <div class="card-value" id="totalExpense">0원</div>
                            <div class="card-subtitle" id="expenseCount">0건</div>
                        </div>
                    </div>
                    
                    <div class="summary-card net">
                        <div class="card-icon">📈</div>
                        <div class="card-content">
                            <div class="card-title">순이익</div>
                            <div class="card-value" id="netProfit">0원</div>
                            <div class="card-subtitle" id="profitMargin">0%</div>
                        </div>
                    </div>
                    
                    <div class="summary-card vat">
                        <div class="card-icon">🧾</div>
                        <div class="card-content">
                            <div class="card-title">부가세</div>
                            <div class="card-value" id="totalVat">0원</div>
                            <div class="card-subtitle" id="vatBreakdown">매출/매입</div>
                        </div>
                    </div>
                </div>
                
                <!-- 상세 분석 테이블 -->
                <div class="analysis-table-container">
                    <h3>상세 분석</h3>
                    <div class="table-wrapper">
                        <table class="analysis-table" id="analysisTable">
                            <thead>
                                <tr>
                                    <th>기간</th>
                                    <th class="number">매출 공급가액</th>
                                    <th class="number">매출 부가세</th>
                                    <th class="number">매출 총액</th>
                                    <th class="number">매입 공급가액</th>
                                    <th class="number">매입 부가세</th>
                                    <th class="number">매입 총액</th>
                                    <th class="number">순이익</th>
                                </tr>
                            </thead>
                            <tbody id="analysisTableBody">
                                <tr>
                                    <td colspan="8" class="loading">데이터를 분석하는 중...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="/products/category-manager.js"></script>
    <script src="/script.js"></script>
</body>
</html>
